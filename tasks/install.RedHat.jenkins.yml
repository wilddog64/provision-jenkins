---
- name: get jenkins package
  get_url:
    url: "{{ jenkins_pkg_url }}/jenkins-{{ jenkins_pkg_version }}.noarch.rpm"
    dest: /tmp/jenkins-{{ jenkins_pkg_version }}.noarch.rpm

- name: install jenkins
  yum:
    name: "/tmp/jenkins-{{ jenkins_pkg_version }}.noarch.rpm"
    state: present

- name: install jenkins
  package:
    name: "{{ item }}"
    state: installed
  with_items:
    - git
    - gcc-c++
    - ruby-devel
    - make
    - autoconf
    - automake
    - rubygems

- name: enable firewalld
  service:
    port: 8080/tcp
    permanent: true
    state: enabled
